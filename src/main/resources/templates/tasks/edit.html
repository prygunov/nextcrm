<div>
    <form th:attr="action=${object.id == null} ? ${url} + 'create' :  ${url} + ${object.id} +  '/update'"
          th:object="${object}" method="post">

        <input type="hidden" name="id" th:value="${object.id == null} ? 0 : ${object.id}" />

        <div class="form-group">
            <select name="status">
                <option th:value="null">Статус</option>
                <option th:each="status : ${statuses}" th:value="${status.id}"
                        th:text="${status.name}" th:selected="${object.status?.id == status.id}"></option>
            </select>
        </div>

        <div class="form-group">
            <label for="name" class="form-control"><b>Название</b></label>
            <input type="text" class="form-text" name="name" id="name" required th:value="${object.name}">
        </div>

        <div class="form-group">
            <label for="content" class="form-control"><b>Содержание задачи</b></label>
            <input type="text" class="form-text" name="content" id="content" required th:value="${object.description}">
        </div>

        <div class="form-group">
            <label for="deadline">Срок выполнения</label>
            <input type="date" name="deadline" id="deadline" th:value="${{object.deadline}}"/>
        </div>

        <div class="form-group">
            <select name="employee">
                <option th:value="null">Ответственный за выполнение</option>
                <option th:each="employee : ${employees}" th:value="${employee.id}"
                        th:text="${employee.login}" th:selected="${object.employee?.id == employee.id}"></option>
            </select>
        </div>
        <div th:if="${object.id == null}">
            <div class="form-group">
                <select name="appeal">
                    <option th:value="null">Связанное обращение</option>
                    <option th:each="appeal : ${appeals}" th:value="${appeal.id}"
                            th:text="${appeal.subject}" th:selected="${object.appeal?.id == appeal.id}"></option>
                </select>
            </div>

            <div class="form-group">
                <select name="order">
                    <option th:value="null">Связанный заказ</option>
                    <option th:each="order : ${orders}" th:value="${order.id}"
                            th:text="@{'Заказ ' + ${order.id}}" th:selected="${object.order?.id == order.id}"></option>
                </select>
            </div>
        </div>
        <div th:if="${object.id != null}">
            <a th:if="${object.appeal != null}" class="btn btn-primary" role="button" th:href="@{'/appeals/'+ ${object.appeal.id} +  '/edit'}">К связанному обращению</a>
            <a th:if="${object.order != null}" class="btn btn-primary" role="button" th:href="@{'/orders/'+ ${object.order.id} +  '/edit'}">К связанному заказу</a>
        </div>
        <button type="submit" name="action" class="btn btn-primary">Сохранить</button>
    </form>
    <div th:if="${object.id != null}">
        <a class="btn btn-primary" role="button" th:href="@{${url} + ${object.id} +  '/remove'}">Удалить</a>
    </div>

</div>